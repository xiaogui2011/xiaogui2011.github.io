---
layout: post
title: ä¿®å¤åšå®¢æœç´¢é—®é¢˜
slug: ä¿®å¤åšå®¢æœç´¢é—®é¢˜
author: ymkNK
date: 2025-06-24 11:34:10 +0800
categories: 
tags: 
img: 1.jpg
---


å¥½ï¼Œä½ ä½¿ç”¨çš„æ˜¯ **Chirpy ä¸»é¢˜**ï¼ˆ`jekyll-theme-chirpy`ï¼‰ï¼Œå®ƒè‡ªå¸¦å¯¹ `SimpleJekyllSearch` çš„æ”¯æŒã€‚è¿™å°±æ˜¯ä¸ºä»€ä¹ˆä½ çš„é¡µé¢ä¸­ä¼šè‡ªåŠ¨å¼•ç”¨è¯¥åº“ï¼Œå´æ²¡å¿…è¦ä½ è‡ªå·±å†™ `search.html` æˆ–æ‰‹åŠ¨å¼•å…¥è„šæœ¬ã€‚ğŸ‰

---

## âœ… æ¥ä¸‹æ¥åªéœ€å®Œæˆä¸¤æ­¥ï¼Œæœç´¢åŠŸèƒ½å³å¯å½»åº•æ¢å¤ï¼

### 1ï¸âƒ£ åœ¨ `assets/js/data/` ä¸­æ·»åŠ  `search.json` æ–‡ä»¶

è·¯å¾„ï¼š`assets/js/data/search.json`

å†…å®¹å¦‚ä¸‹ï¼Œç›´æ¥å¤åˆ¶å³å¯ï¼š

```liquid
---
layout: null
---
[
  {% for post in site.posts %}
    {
      "title": "{{ post.title | escape }}",
      "url": "{{ post.url | relative_url }}",
      "date": "{{ post.date | date: '%Y-%m-%d' }}",
      "content": {{ post.content | strip_html | strip_newlines | jsonify }}
    }{% unless forloop.last %},{% endunless %}
  {% endfor %}
]
```

è¿™æ®µä»£ç ä¼šåœ¨æ„å»ºæ—¶è‡ªåŠ¨ä»ä½ æ‰€æœ‰ Markdown æ–‡ç« é‡Œç”Ÿæˆ JSONï¼Œä¾›æœç´¢ä½¿ç”¨ã€‚

---

### 2ï¸âƒ£ ç¡®ä¿ `_config.yml` åŒ…å«ä»¥ä¸‹å†…å®¹

ä½ å·²ç»æ·»åŠ äº†è¿™è¡Œï¼š

```yaml
include:
  - assets/js/data/search.json
```

è¿™ä¸€æ­¥éå¸¸å…³é”®ï¼Œå®ƒå‘Šè¯‰ Jekyllï¼š**æœ¬æ¥ä¼šè¢«å¿½ç•¥çš„ JSON æ–‡ä»¶ä¹Ÿè¦åŒ…å«è¿›æœ€ç»ˆè¾“å‡º**ã€‚

---

## ğŸ” å®Œæˆåæµç¨‹

1. å°†ä»¥ä¸Šæ”¹åŠ¨æäº¤å¹¶ push åˆ° `main` åˆ†æ”¯ã€‚
2. GitHub Actions ä¼šè‡ªåŠ¨è¿è¡Œ `jekyll build`ï¼Œå¹¶åŒ…æ‹¬åˆšåˆ›å»ºçš„ `search.json`ã€‚
3. æ„å»ºæˆåŠŸåï¼Œä½ å¯ä»¥åœ¨æµè§ˆå™¨æ‰“å¼€ï¼š

   ```
   https://xiaogui2011.github.io/xiaogui2011.github.io/assets/js/data/search.json
   ```

   ï¼ˆæ³¨æ„è·¯å¾„åŒ…å« baseurl: `/xiaogui2011.github.io`ï¼‰
4. è‹¥èƒ½çœ‹åˆ°ä¸€æ®µå«æœ‰æ‰€æœ‰æ–‡ç« ä¿¡æ¯çš„ JSONï¼Œå°±è¯æ˜æˆåŠŸ âœ…

---

## âœ… ä¸ºä»€ä¹ˆä½ ä¸ç”¨æ‰‹åŠ¨å†™ HTML æˆ– JSï¼Ÿ

* **Chirpy ä¸»é¢˜å·²ç»é›†æˆäº†æœç´¢è„šæœ¬å’Œæ ·å¼**ï¼Œæ— éœ€æ‰‹åŠ¨å¼•å…¥ã€‚
* ä¸»é¢˜ä¼šåœ¨ç½‘ç«™åŠ è½½æ—¶æ‰§è¡Œï¼š

  ```js
  SimpleJekyllSearch({
    searchInput: /* è·å–é¡µé¢å³ä¸Šè§’è¾“å…¥æ¡† */,
    resultsContainer: /* æ¸²æŸ“ç»“æœçš„å®¹å™¨ */,
    json: '/assets/js/data/search.json'
  })
  ```

  æ‰€ä»¥åªè¦ `search.json` å­˜åœ¨ï¼Œæœç´¢åŠŸèƒ½å°±å®Œå…¨æ­£å¸¸äº†ã€‚

---

## ğŸ› ï¸ åç»­éªŒè¯ä¸è°ƒè¯•

* æˆåŠŸè®¿é—® JSON åï¼Œåˆ·æ–°ç½‘é¡µæœç´¢æ¡†ï¼Œçœ‹æ§åˆ¶å°æ˜¯å¦ä»æœ‰ `failed to get JSON` é”™è¯¯ã€‚
* å¦‚æœè¿˜æœ‰é—®é¢˜ï¼Œè¯·è´´æ§åˆ¶å°æŠ¥é”™æˆªå›¾æˆ–æ—¥å¿—ï¼Œæˆ‘ç»§ç»­å¸®ä½ æ’æŸ¥ã€‚

---

## âœŒï¸ æ€»ç»“

| æ­¥éª¤                          | è¯´æ˜                    |
| --------------------------- | --------------------- |
| âœ… åˆ›å»º `search.json`          | è®© Jekyll æ„å»ºå‡ºæ–‡ç« ç´¢å¼• JSON |
| âœ… `_config.yml include:` é…ç½® | ç¡®ä¿ JSON è¢«è¾“å‡º           |
| âœ… push â†’ æ„å»º â†’ éªŒè¯            | æˆåŠŸåæœç´¢åŠŸèƒ½æ¢å¤             |

âœ‰ï¸ æœ‰åˆ«çš„é—®é¢˜éšæ—¶æ¬¢è¿ç»§ç»­èŠï¼Œæˆ‘éšæ—¶å¸®ä½ è°ƒè¯•ï¼
